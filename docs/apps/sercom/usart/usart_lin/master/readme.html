<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="../../../../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../../../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../../../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../../../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>SERCOM USART LIN Master | Harmony 3 peripheral library application examples for PIC32CM JH01 family</title> <meta name="generator" content="Jekyll v3.9.3" /> <meta property="og:title" content="SERCOM USART LIN Master" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 peripheral library application examples for PIC32CM JH01 family" /> <meta property="og:description" content="Harmony 3 peripheral library application examples for PIC32CM JH01 family" /> <link rel="canonical" href="../../../../../apps/sercom/usart/usart_lin/master/readme.html" /> <meta property="og:url" content="../../../../../apps/sercom/usart/usart_lin/master/readme.html" /> <meta property="og:site_name" content="Harmony 3 peripheral library application examples for PIC32CM JH01 family" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="SERCOM USART LIN Master" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Harmony 3 peripheral library application examples for PIC32CM JH01 family","headline":"SERCOM USART LIN Master","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"url":"../../../../../apps/sercom/usart/usart_lin/master/readme.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../../../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../../index.html" class="nav-list-link">Harmony 3 peripheral library application examples for PIC32CM JH01 family</a><ul class="nav-list "><li class="nav-list-item "><a href="../../../../../apps/ac/ac_wav_gen/readme.html" class="nav-list-link">AC PWM generation</a></li><li class="nav-list-item "><a href="../../../../../apps/ac/ac_sleepwalk_singleshot/readme.html" class="nav-list-link">AC Sleepwalking</a></li><li class="nav-list-item "><a href="../../../../../apps/adc/adc_dmac_sleepwalking/readme.html" class="nav-list-link">ADC DMA sleepwalking</a></li><li class="nav-list-item "><a href="../../../../../apps/adc/adc_sample/readme.html" class="nav-list-link">ADC Sample</a></li><li class="nav-list-item "><a href="../../../../../apps/adc/adc_window_sleepwalking/readme.html" class="nav-list-link">ADC window sleepwalking</a></li><li class="nav-list-item "><a href="../../../../../apps/can/can_fd_operation_blocking/readme.html" class="nav-list-link">CAN FD blocking</a></li><li class="nav-list-item "><a href="../../../../../apps/can/can_fd_operation_interrupt_timestamp/readme.html" class="nav-list-link">CAN FD interrupt</a></li><li class="nav-list-item "><a href="../../../../../apps/ccl/manchester_encoder/readme.html" class="nav-list-link">CCL Manchester Encoder</a></li><li class="nav-list-item "><a href="../../../../../apps/clock/clock_config/readme.html" class="nav-list-link">Clock configuration</a></li><li class="nav-list-item "><a href="../../../../../apps/dac/dac_wav_gen/readme.html" class="nav-list-link">DAC waveform generation</a></li><li class="nav-list-item "><a href="../../../../../apps/dac/dac_wav_gen_dma/readme.html" class="nav-list-link">DAC waveform generation with DMA</a></li><li class="nav-list-item "><a href="../../../../../apps/divas/divas_c_operator_override/readme.html" class="nav-list-link">DIVAS override C division operator</a></li><li class="nav-list-item "><a href="../../../../../apps/dmac/dmac_usart_echo/readme.html" class="nav-list-link">DMAC USART echo</a></li><li class="nav-list-item "><a href="../../../../../apps/dsu/dsu_crc32_generate/readme.html" class="nav-list-link">DSU compute CRC32</a></li><li class="nav-list-item "><a href="../../../../../apps/eic/eic_led_on_off/readme.html" class="nav-list-link">EIC Interrupt</a></li><li class="nav-list-item "><a href="../../../../../apps/evsys/evsys_trigger/readme.html" class="nav-list-link">EVSYS trigger</a></li><li class="nav-list-item "><a href="../../../../../apps/freqm/freqm_measure_clock_freq/readme.html" class="nav-list-link">FREQM measurement</a></li><li class="nav-list-item "><a href="../../../../../apps/mcramc/mcramc_ecc_mbist_testing/readme.html" class="nav-list-link">MCRAMC ECC with Fault Injection and MBIST Testing</a></li><li class="nav-list-item "><a href="../../../../../apps/nvmctrl/nvmctrl_ecc_testing/readme.html" class="nav-list-link">NVMCTRL ECC Testing</a></li><li class="nav-list-item "><a href="../../../../../apps/nvmctrl/nvmctrl_data_flash/readme.html" class="nav-list-link">NVMCTRL data flash</a></li><li class="nav-list-item "><a href="../../../../../apps/nvmctrl/nvmctrl_flash_read_write/readme.html" class="nav-list-link">NVMCTRL read write</a></li><li class="nav-list-item "><a href="../../../../../apps/pm/pm_wakeup_eic/readme.html" class="nav-list-link">PM wakeup using EIC</a></li><li class="nav-list-item "><a href="../../../../../apps/pm/pm_wakeup_rtc/readme.html" class="nav-list-link">PM wakeup using RTC</a></li><li class="nav-list-item "><a href="../../../../../apps/port/port_led_on_off_polling/readme.html" class="nav-list-link">PORT polling</a></li><li class="nav-list-item "><a href="../../../../../apps/rstc/rstc_reset_cause/readme.html" class="nav-list-link">RSTC reset cause</a></li><li class="nav-list-item "><a href="../../../../../apps/rtc/rtc_alarm/readme.html" class="nav-list-link">RTC alarm interrupt</a></li><li class="nav-list-item "><a href="../../../../../apps/sercom/i2c/slave/i2c_eeprom_emulation/readme.html" class="nav-list-link">SERCOM I2C EEPROM emulation (I2C slave)</a></li><li class="nav-list-item "><a href="../../../../../apps/sercom/i2c/master/i2c_eeprom/readme.html" class="nav-list-link">SERCOM I2C EEPROM read write</a></li><li class="nav-list-item "><a href="../../../../../apps/sercom/spi/spi_eeprom_write_read/readme.html" class="nav-list-link">SERCOM SPI EEPROM read write</a></li><li class="nav-list-item active"><a href="../../../../../apps/sercom/usart/usart_lin/master/readme.html" class="nav-list-link active">SERCOM USART LIN Master</a></li><li class="nav-list-item "><a href="../../../../../apps/sercom/usart/usart_echo_interrupt/readme.html" class="nav-list-link">SERCOM USART interrupt</a></li><li class="nav-list-item "><a href="../../../../../apps/systick/systick_periodic_timeout/readme.html" class="nav-list-link">Systick periodic interrupt</a></li><li class="nav-list-item "><a href="../../../../../apps/tc/tc_capture_mode/readme.html" class="nav-list-link">TC capture mode</a></li><li class="nav-list-item "><a href="../../../../../apps/tc/tc_compare_mode/readme.html" class="nav-list-link">TC compare mode</a></li><li class="nav-list-item "><a href="../../../../../apps/tc/tc_timer_mode/readme.html" class="nav-list-link">TC timer mode</a></li><li class="nav-list-item "><a href="../../../../../apps/tcc/tcc_synchronous_pwm_channels/readme.html" class="nav-list-link">TCC PWM generation</a></li><li class="nav-list-item "><a href="../../../../../apps/wdt/wdt_timeout/readme.html" class="nav-list-link">WDT timeout</a></li></ul></li><li class="nav-list-item"><a href="../../../../../release_notes.html" class="nav-list-link">Release notes</a></li><li class="nav-list-item"><a href="../../../../../mplab_harmony_license.html" class="nav-list-link">License</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Harmony 3 peripheral library application examples for PIC32CM JH01 family" aria-label="Search Harmony 3 peripheral library application examples for PIC32CM JH01 family" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../../../../index.html">Harmony 3 peripheral library application examples for PIC32CM JH01 family</a></li> <li class="breadcrumb-nav-list-item"><span>SERCOM USART LIN Master</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <p><a href="https://www.microchip.com"><img src="https://www.microchip.com/ResourcePackages/Microchip/assets/dist/images/logo.png" alt="MCHP" /></a></p> <h1 id="sercom-usart-lin-master"> <a href="#sercom-usart-lin-master" aria-labelledby="sercom-usart-lin-master" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SERCOM USART LIN Master </h1> <p>This example application demonstrates how to use the SERCOM USART peripheral in LIN Master mode</p> <h2 id="description"> <a href="#description" aria-labelledby="description" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Description </h2> <p>In this example, the LIN Master reads LED0 and SW0 status of the LIN Slave every 250 milliseconds by sending a LIN receive command containing three fields: break, sync and indentifier (ID). The LIN Slave responds with 1 byte data containing the SW0 status (Bit[0]) and LED0 status (Bit[1]) followed by the Checksum byte.</p> <p>Upon receiving the response, LIN Master checks if the SW0 status is in pressed or released state. If the SW0 is pressed, the LIN Master toggles the state of receieved LED0 status and asks the LIN Slave to set the LED0 to the new state (set LED0 to OFF state if LED0 was previously ON and vice-versa) by sending a LIN transmit command.</p> <p>For this example, the checksum algorithm is defined as enhanced meaning it is calculated by summing and data bytes along with the Protected ID (PID).</p> <ul> <li>PID for reading LED0 and SW0 status - 0x80 (Frame ID - 0x00).</li> <li>PID for writing LED0 status - 0xC1 (Frame ID - 0x01).</li> </ul> <p>The example uses enhanced checksum.</p> <h2 id="downloading-and-building-the-application"> <a href="#downloading-and-building-the-application" aria-labelledby="downloading-and-building-the-application" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Downloading and building the application </h2> <p>To clone or download this application from Github, go to the <a href="https://github.com/Microchip-MPLAB-Harmony/csp_apps_pic32cm_jh00_jh01">main page of this repository</a> and then click <strong>Clone</strong> button to clone this repository or download as zip file. This content can also be downloaded using content manager by following these <a href="https://github.com/Microchip-MPLAB-Harmony/contentmanager/wiki">instructions</a>.</p> <p>Path of the application within the repository is <strong>apps/sercom/usart/usart_lin/master/firmware</strong>**.</p> <p>To build the application, refer to the following table and open the project using its IDE.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Project Name</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>pic32cm_jh01_curiosity_pro.X</td> <td>MPLABX project for [PIC32CM JH01 Curiosity Pro Evaluation Kit]</td> </tr> <tr> <td> </td> <td> </td> </tr> </tbody> </table></div> <h2 id="setting-up-the-hardware"> <a href="#setting-up-the-hardware" aria-labelledby="setting-up-the-hardware" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up the hardware </h2> <p>The following table shows the target hardware for the application projects.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Project Name</th> <th style="text-align: center">Board</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">pic32cm_jh01_curiosity_pro.X</td> <td style="text-align: center"><a href="">PIC32CM JH01 Curiosity Pro Evaluation Kit</a></td> </tr> <tr> <td style="text-align: left"> </td> <td style="text-align: center"> </td> </tr> </tbody> </table></div> <p>Hardware setup requires two boards, one acting as the LIN Master and the other as the LIN slave.</p> <h3 id="setting-up-pic32cm-jh01-curiosity-pro-evaluation-kit"> <a href="#setting-up-pic32cm-jh01-curiosity-pro-evaluation-kit" aria-labelledby="setting-up-pic32cm-jh01-curiosity-pro-evaluation-kit" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up <a href="">PIC32CM JH01 Curiosity Pro Evaluation Kit</a> </h3> <ul> <li>Enable Master node pull-up by mounting the jumper on J501 connector</li> <li>Change the VCC-SEL jumper settings from 3.3V to 5V.</li> <li>Mount the jumper on J500 connector to power the LIN transceiver from the on board VCC.</li> <li>Connect a wire from “LIN” on J503 on LIN Master board to “LIN” on J503 on LIN slave board</li> <li>Connect a wire from “GND” on J503 on LIN Master board to “GND” on J503 on LIN slave board</li> <li>Connect the Debug USB port on the board to the computer using a micro USB cable</li> </ul> <h2 id="running-the-application"> <a href="#running-the-application" aria-labelledby="running-the-application" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running the Application </h2> <ol> <li>Build and Program LIN master and LIN slave applications using its IDE. Path of the LIN Slave application within the repository is <strong>apps/sercom/usart/usart_lin/slave/firmware</strong>.</li> <li>Press SW0 on LIN Master board to start the communication. LIN Master will start reading LED0 and SW0 status from the LIN slave every 250 milliseconds.</li> <li>Press SW0 on the LIN Slave board. The LED0 on the LIN Slave board will toggle if the SW0 is pressed.</li> <li>The following table provides the LED0 and SW0 names</li> </ol> <div class="table-wrapper"><table> <thead> <tr> <th>Board</th> <th>LED0 name</th> <th> </th> </tr> </thead> <tbody> <tr> <td><a href="">PIC32CM JH01 Curiosity Pro Evaluation Kit</a></td> <td>LED0</td> <td>SW0</td> </tr> <tr> <td> </td> <td> </td> <td> </td> </tr> </tbody> </table></div> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='../../../../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2023 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
